<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>
        
            Migrating static pages - Homepage of Vašek
        
    </title>
    <meta name="description" content="Homepage of Vašek">
    <meta name="author" content="">

    
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <link href="https://vaclavblazej.github.io//font/fonts.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://vaclavblazej.github.io/css/fonts.css">

    
    <script src="https://vaclavblazej.github.io/js/custom.js"></script>
    <link rel="stylesheet" href="https://vaclavblazej.github.io/css/custom.css">

    <link rel="shortcut icon" href="https://vaclavblazej.github.io//favicon.ico" />

    

    
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [ ['$','$'] ],
                displayMath: [ ["\\[","\\]"] ],
                processEscapes: true,
                autoload: {
                    color: [],
                    colorv2: ['color']
                },
                packages: {'[+]': ['noerrors']}
            },
            options: {
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process',
                renderActions: {
                    addMenu: [0, '', '']
                }
            },
            loader: {
                load: ['[tex]/noerrors']
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script"></script>

    <script src="https://vaclavblazej.github.io/js/jquery.min.js" type="text/javascript"></script>

</head>
<body>

<div class="header noprint">
    
    <div class="desktop nav-menu">
        <a href="https://vaclavblazej.github.io/" class="site-title pad">Homepage of Vašek</a>
        <ul>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/">Material</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/post/">Blog</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/teaching/">Teaching</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/pub/">Research</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/about/">About</a>
            </li>
            
        </ul>
    </div>
    <div class="mobile nav-menu">
        <a href="https://vaclavblazej.github.io/" class="site-title pad">Homepage of Vašek</a>
        <a href="#" id="toggle-btn">&#9776;</a>
    </div>
    <div>
        <ul id="toggle-content" style="display:none;">
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/">Material</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/post/">Blog</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/teaching/">Teaching</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/pub/">Research</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/about/">About</a>
            </li>
            
        </ul>
    </div>
</div>



<div class="content">
    
    <div class="post">
        <div class="post-title">
            <p class="footnote">
                


    <time datetime="2024-08-10T00:00:00Z" class="post-list timeago">10.08.2024</time>






    |



    tags:[ <a href="https://vaclavblazej.github.io/tags/setup">setup</a> <a href="https://vaclavblazej.github.io/tags/tutorial">tutorial</a> ]






            </p>
            <h1>Migrating static pages</h1>

            

        </div>
        <div class="post-content">
            <p>I hoped that my alma mater would keep my account open but that turned out to not be the case.
University&rsquo;s data got compromised and they pushed us to change our passwords.
When I did attempt to change it  the respective website didn&rsquo;t work.
After the password got deactivated I contacted the helpdesk which informed me my account will not be activated as I have no formal relation to the faculty and the alumni access is not yet implemented.
Anyway, this made me revisit my <a href="https://vaclavblazej.github.io/post/2021/migrating_pages/">old migration code</a> and setup <a href="https://github.com/vaclavblazej/vaclavblazej.github.io"target="_blank">my page on GitHub<span style="white-space: nowrap;">&thinsp;↗</span></a>.</p>
<p>In the following, I present an upgraded version of my migration code that creates a website that for each html file contains a redirection to the proper new web address.</p>
<p>Template file for the redirection <code>orig.html</code>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#57606a">&lt;!DOCTYPE html&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">&lt;</span><span style="color:#0550ae">html</span><span style="color:#1f2328">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#1f2328">&lt;</span><span style="color:#0550ae">head</span><span style="color:#1f2328">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">&lt;</span><span style="color:#0550ae">title</span><span style="color:#1f2328">&gt;</span>Page Moved<span style="color:#1f2328">&lt;/</span><span style="color:#0550ae">title</span><span style="color:#1f2328">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">&lt;</span><span style="color:#0550ae">meta</span> <span style="color:#1f2328">http-equiv</span><span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;refresh&#34;</span> <span style="color:#1f2328">content</span><span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;0; URL=base/address&#34;</span> <span style="color:#1f2328">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#1f2328">&lt;/</span><span style="color:#0550ae">head</span><span style="color:#1f2328">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#1f2328">&lt;</span><span style="color:#0550ae">body</span><span style="color:#1f2328">&gt;</span>
</span></span><span style="display:flex;"><span>    This page has moved. Click <span style="color:#1f2328">&lt;</span><span style="color:#0550ae">a</span> <span style="color:#1f2328">href</span><span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;base/address&#34;</span><span style="color:#1f2328">&gt;</span>here<span style="color:#1f2328">&lt;/</span><span style="color:#0550ae">a</span><span style="color:#1f2328">&gt;</span> to go to the new page.
</span></span><span style="display:flex;"><span>  <span style="color:#1f2328">&lt;/</span><span style="color:#0550ae">body</span><span style="color:#1f2328">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">&lt;/</span><span style="color:#0550ae">html</span><span style="color:#1f2328">&gt;</span>
</span></span></code></pre></div><p>Bash script <code>migrate.sh</code> that scans a directory and creates a folder with proper redirections:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#57606a">#!/usr/bin/env bash
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span>
</span></span><span style="display:flex;"><span><span style="color:#953800">base</span><span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;https://exampleaccount.github.io&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#0550ae">(</span><span style="color:#6639ba">cd</span> ../dist/ <span style="color:#0550ae">&amp;&amp;</span> find . -iname <span style="color:#0a3069">&#34;*.html&#34;</span> &gt; ../migration/pages.txt<span style="color:#0550ae">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>rm -rf ./generated/
</span></span><span style="display:flex;"><span>mkdir -p ./generated/
</span></span><span style="display:flex;"><span>cat &lt; ./pages.txt <span style="color:#1f2328">|</span> <span style="color:#cf222e">while</span> <span style="color:#6639ba">read</span> -r line<span style="color:#1f2328">;</span> <span style="color:#cf222e">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#953800">final_path</span><span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;./generated/</span><span style="color:#953800">$line</span><span style="color:#0a3069">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#953800">final_dir</span><span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;</span><span style="color:#cf222e">$(</span>dirname <span style="color:#0a3069">&#34;</span><span style="color:#953800">$final_path</span><span style="color:#0a3069">&#34;</span><span style="color:#cf222e">)</span><span style="color:#0a3069">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#953800">tmp_file</span><span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;</span><span style="color:#cf222e">$(</span>basename <span style="color:#0a3069">&#34;</span><span style="color:#953800">$final_path</span><span style="color:#0a3069">&#34;</span><span style="color:#cf222e">)</span><span style="color:#0a3069">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#953800">address_file</span><span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;</span><span style="color:#cf222e">$(</span>basename <span style="color:#0a3069">&#34;</span><span style="color:#953800">$line</span><span style="color:#0a3069">&#34;</span><span style="color:#cf222e">)</span><span style="color:#0a3069">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">if</span> <span style="color:#0550ae">[[</span> <span style="color:#0a3069">&#34;</span><span style="color:#953800">$tmp_file</span><span style="color:#0a3069">&#34;</span> <span style="color:#0550ae">==</span> <span style="color:#0a3069">&#34;index.html&#34;</span> <span style="color:#0550ae">]]</span><span style="color:#1f2328">;</span> <span style="color:#cf222e">then</span>
</span></span><span style="display:flex;"><span>        <span style="color:#953800">address_file</span><span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">fi</span>
</span></span><span style="display:flex;"><span>    <span style="color:#953800">address_dir</span><span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;</span><span style="color:#cf222e">$(</span>dirname <span style="color:#0a3069">&#34;</span><span style="color:#953800">$line</span><span style="color:#0a3069">&#34;</span><span style="color:#cf222e">)</span><span style="color:#0a3069">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">if</span> <span style="color:#0550ae">[[</span> <span style="color:#0a3069">&#34;</span><span style="color:#953800">$address_dir</span><span style="color:#0a3069">&#34;</span> <span style="color:#0550ae">==</span> <span style="color:#0a3069">&#34;.&#34;</span> <span style="color:#0550ae">]]</span><span style="color:#1f2328">;</span> <span style="color:#cf222e">then</span>
</span></span><span style="display:flex;"><span>        <span style="color:#953800">address_dir</span><span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">else</span>
</span></span><span style="display:flex;"><span>        <span style="color:#953800">address_dir</span><span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;</span><span style="color:#0a3069">${</span><span style="color:#953800">address_dir</span><span style="color:#1f2328">:</span><span style="color:#953800">2</span><span style="color:#1f2328">:</span><span style="color:#953800">1000</span><span style="color:#0a3069">}</span><span style="color:#0a3069">/&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">fi</span>
</span></span><span style="display:flex;"><span>    mkdir -p <span style="color:#0a3069">&#34;</span><span style="color:#953800">$final_dir</span><span style="color:#0a3069">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#6639ba">echo</span> <span style="color:#0a3069">&#39;---&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#6639ba">echo</span> <span style="color:#0a3069">&#34;</span><span style="color:#953800">$final_path</span><span style="color:#0a3069">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#6639ba">echo</span> <span style="color:#0a3069">&#34;</span><span style="color:#953800">$final_dir</span><span style="color:#0a3069">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#6639ba">echo</span> <span style="color:#0a3069">&#34;</span><span style="color:#953800">$tmp_file</span><span style="color:#0a3069">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#6639ba">echo</span> <span style="color:#0a3069">&#34;</span><span style="color:#953800">$address_file</span><span style="color:#0a3069">&#34;</span>
</span></span><span style="display:flex;"><span>    cp orig.html copy.html
</span></span><span style="display:flex;"><span>    sed -i <span style="color:#0a3069">&#39;s|base|&#39;</span><span style="color:#0a3069">&#34;</span><span style="color:#953800">$base</span><span style="color:#0a3069">&#34;</span><span style="color:#0a3069">&#39;|g&#39;</span> copy.html
</span></span><span style="display:flex;"><span>    sed -i <span style="color:#0a3069">&#39;s|address|&#39;</span><span style="color:#0a3069">&#34;</span><span style="color:#953800">$address_dir$address_file</span><span style="color:#0a3069">&#34;</span><span style="color:#0a3069">&#39;|g&#39;</span> copy.html
</span></span><span style="display:flex;"><span>    cp copy.html <span style="color:#0a3069">&#34;</span><span style="color:#953800">$final_path</span><span style="color:#0a3069">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">done</span>
</span></span><span style="display:flex;"><span>rm -f ./copy.html
</span></span><span style="display:flex;"><span>rm -f ./pages.txt
</span></span></code></pre></div><p>The script assumes that the old website resides in folder <code>../dist/</code> and the script is in folder named <code>migration</code>.
The result is placed into folder <code>generated</code>.
There are a few if statements that make the address a little bit nicer, as hugo ignores <code>index.html</code> when creating a final page url.</p>

        </div>
    </div>
</div>

<div class="footer">
    <ul class="pad-content">

        <li>
            © Václav Blažej
            
                2024
            
        </li>
        

        

        
    </ul>
    <ul title="Last update of the website" class="pull-right pad">30. January 2025</ul>
</div>

<script type="text/javascript">
    $("#toggle-btn").click(function(){
        $("#toggle-content").toggle();
        if($(this).html() === "☰") {
            $(this).html("X")
        } else {
            $(this).html("☰")
        }
    });
    $(window).resize(function(){
        if(window.innerWidth > 768) {
            $(".desktop").removeAttr("style");
        }
    });
</script>
</body>
</html>

