<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>
        
            Jak na pointery?! - Homepage of Vašek
        
    </title>
    <meta name="description" content="Homepage of Vašek">
    <meta name="author" content="">

    
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <link href="https://vaclavblazej.github.io//font/fonts.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://vaclavblazej.github.io/css/fonts.css">

    
    <script src="https://vaclavblazej.github.io/js/custom.js"></script>
    <link rel="stylesheet" href="https://vaclavblazej.github.io/css/custom.css">

    <link rel="shortcut icon" href="https://vaclavblazej.github.io//favicon.ico" />

    

    
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [ ['$','$'] ],
                displayMath: [ ["\\[","\\]"] ],
                processEscapes: true,
                autoload: {
                    color: [],
                    colorv2: ['color']
                },
                packages: {'[+]': ['noerrors']}
            },
            options: {
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process',
                renderActions: {
                    addMenu: [0, '', '']
                }
            },
            loader: {
                load: ['[tex]/noerrors']
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script"></script>

    <script src="https://vaclavblazej.github.io/js/jquery.min.js" type="text/javascript"></script>

</head>
<body>

<div class="header noprint">
    
    <div class="desktop nav-menu">
        <a href="https://vaclavblazej.github.io/" class="site-title pad">Homepage of Vašek</a>
        <ul>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/">Material</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/post/">Blog</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/pub/">Research</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/about/">About</a>
            </li>
            
        </ul>
    </div>
    <div class="mobile nav-menu">
        <a href="https://vaclavblazej.github.io/" class="site-title pad">Homepage of Vašek</a>
        <a href="#" id="toggle-btn">&#9776;</a>
    </div>
    <div>
        <ul id="toggle-content" style="display:none;">
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/">Material</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/post/">Blog</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/pub/">Research</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/about/">About</a>
            </li>
            
        </ul>
    </div>
</div>



<div class="content">
    
    <div class="post">
        <div class="post-title">
            <p class="footnote">
                


    <time datetime="2023-02-10T00:00:00Z" class="post-list timeago">10.02.2023</time>






    |



    tags:[ <a href="https://vaclavblazej.github.io/tags/programming">programming</a> <a href="https://vaclavblazej.github.io/tags/tutorial">tutorial</a> ]






            </p>
            <h1>Jak na pointery?!</h1>

            

        </div>
        <div class="post-content">
            <p><em>Tento příspěvek vznikl jako doplňující materiál ke kurzu BI-PA2 v roce 2015</em>
<em>Díky Páje za jeho připomenutí :)</em>
<em>Za fakultním přihlášením je přístupný zmigrovaný <a href="https://courses.fit.cvut.cz/BI-PA2/@B152/teacher/blazeva1/mat/pointers.html"target="_blank">original na courses<span style="white-space: nowrap;">&thinsp;↗</span></a>.</em></p>
<hr>
<p>Proměnná je jako hotovost.
Ukazatel je jako bankovní účet &ndash; znáte číslo účtu a na peníze nelze šáhnout přímo, ale pouze zkrz číslo účtu.</p>
<h2 id="co-je-to-pointer">Co je to pointer?</h2>
<p>Ukazatel (anglicky Pointer) je proměnná, která místo hodnoty ukládá <em>adresu jiné proměnné</em>.</p>
<h3 id="adresa-proměnné">Adresa proměnné</h3>
<p><em>Zdrojový kód (v C++):</em></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#57606a">#include</span> <span style="color:#57606a">&lt;iostream&gt;</span><span style="color:#57606a">
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span><span style="color:#cf222e">using</span> <span style="color:#cf222e">namespace</span> std<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">int</span> <span style="color:#6639ba">main</span><span style="color:#1f2328">()</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">int</span> a <span style="color:#0550ae">=</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0a3069">&#34;Adresa promenne &#39;a&#39; = &#34;</span><span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0550ae">&amp;</span>a <span style="color:#0550ae">&lt;&lt;</span> endl<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0a3069">&#34;Hodnota promenne &#39;a&#39; = &#34;</span><span style="color:#0550ae">&lt;&lt;</span> a <span style="color:#0550ae">&lt;&lt;</span> endl<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span>
</span></span></code></pre></div><p><em>Výpis:</em></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>Adresa promenne &#39;a&#39; = 0x23cabc
</span></span><span style="display:flex;"><span>Hodnota promenne &#39;a&#39; = 0
</span></span></code></pre></div><p><em>Vysvětlení:</em>
Každá proměnná je v paměti (na RAMce) uložena na nějaké pozici.
Tato pozice má svou unikátní <em>Adresu</em>.
Adresu proměnné <code>a</code> zjistíme příkazem <code>&amp;a</code>, v našem případě to bylo <code>0x23cabc</code>.
Vypsaná adresa proměnné bude pro každý běh programu nejspíše jiná, protože program dostane pokaždé novou část paměti, se kterou může pracovat.</p>
<h3 id="nastavení-pointeru">Nastavení pointeru</h3>
<p><em>Zdrojový kód:</em></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#57606a">#include</span> <span style="color:#57606a">&lt;iostream&gt;</span><span style="color:#57606a">
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span><span style="color:#cf222e">using</span> <span style="color:#cf222e">namespace</span> std<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">int</span> <span style="color:#6639ba">main</span><span style="color:#1f2328">()</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">int</span> a <span style="color:#0550ae">=</span> <span style="color:#0550ae">4</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0a3069">&#34;Adresa promenne &#39;a&#39; = &#34;</span><span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0550ae">&amp;</span>a <span style="color:#0550ae">&lt;&lt;</span> endl<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0a3069">&#34;Hodnota promenne &#39;a&#39; = &#34;</span><span style="color:#0550ae">&lt;&lt;</span> a <span style="color:#0550ae">&lt;&lt;</span> endl<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#0550ae">&lt;&lt;</span> endl<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">int</span> <span style="color:#0550ae">*</span> p<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    p <span style="color:#0550ae">=</span> <span style="color:#0550ae">&amp;</span>a<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0a3069">&#34;Adresa promenne &#39;p&#39; = &#34;</span><span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0550ae">&amp;</span>p <span style="color:#0550ae">&lt;&lt;</span> endl<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0a3069">&#34;Hodnota promenne &#39;p&#39; = &#34;</span><span style="color:#0550ae">&lt;&lt;</span> p <span style="color:#0550ae">&lt;&lt;</span> endl<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">return</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span>
</span></span></code></pre></div><p><em>Výpis:</em></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>Adresa promenne &#39;a&#39; = 0x23cabc
</span></span><span style="display:flex;"><span>Hodnota promenne &#39;a&#39; = 4
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Adresa promenne &#39;p&#39; = 0x23cab0
</span></span><span style="display:flex;"><span>Hodnota promenne &#39;p&#39; = 0x23cabc
</span></span></code></pre></div><p><em>Vysvětlení:</em>
Nyní jsme vytvořili ukazatel na proměnnou typu <code>int</code> &ndash; to znamená, že do hodnoty proměnné <code>p</code> jsme uložili adresu proměnné <code>a</code> (proměnná <code>a</code> je typu <code>int</code>).
Ukazatel na proměnnou nějakého typu se značí typem s hvězdičkou.
Takže ukazatel na <code>int</code> se značí <code>int*</code>, ukazatel na <code>char</code> je <code>char*</code> a ukazatel na objekt <code>Auto</code> je <code>Auto*</code>.
Z příkladu vidíme, že hodnota proměnné <code>p</code> je <em>adresa</em> proměnné <code>a</code>.
To je jediný a nejdůležitější rozdíl mezi běžnou proměnnou a ukazatelem.</p>
<h3 id="nastavení-hodnoty-proměnné-přes-ukazatel">Nastavení hodnoty proměnné přes ukazatel</h3>
<p><em>Zdrojový kód:</em></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#57606a">#include</span> <span style="color:#57606a">&lt;iostream&gt;</span><span style="color:#57606a">
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span><span style="color:#cf222e">using</span> <span style="color:#cf222e">namespace</span> std<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">int</span> <span style="color:#6639ba">main</span><span style="color:#1f2328">()</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">int</span> a <span style="color:#0550ae">=</span> <span style="color:#0550ae">4</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0a3069">&#34;Hodnota promenne &#39;a&#39; -&gt; &#34;</span><span style="color:#0550ae">&lt;&lt;</span> a <span style="color:#0550ae">&lt;&lt;</span> endl<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">int</span> <span style="color:#0550ae">*</span> p<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    p <span style="color:#0550ae">=</span> <span style="color:#0550ae">&amp;</span>a<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">*</span>p <span style="color:#0550ae">=</span> <span style="color:#0550ae">42</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0a3069">&#34;Hodnota promenne &#39;a&#39; -&gt; &#34;</span><span style="color:#0550ae">&lt;&lt;</span> a <span style="color:#0550ae">&lt;&lt;</span> endl<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">return</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span>
</span></span></code></pre></div><p><em>Výpis:</em></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>Hodnota promenne &#39;a&#39; -&gt; 4
</span></span><span style="display:flex;"><span>Hodnota promenne &#39;a&#39; -&gt; 42
</span></span></code></pre></div><p><em>Vysvětlení:</em>
Stejně jako v minulém případě jsme nastavili hodnotu ukazatele <code>p</code> na adresu proměnné <code>a</code>.
<em>Dereference</em> (neboli hvězdička v <code>*p</code>) je operace, kterou můžeme použít pouze na ukazatel.
Dereference proměnné <code>p</code> znamená, že <em>pracujeme s proměnnou na adrese hodnoty ukazatele</em>!
Díky této operaci můžeme pracovat s hodnotou proměnné <code>a</code>, aniž bychom nastavovali proměnnou <code>a</code> přímo.
Použití <code>*p</code> má stejný výsledek jako kdybychom napsali <code>a</code>, takže <code>*p = 42</code> je to samé jako <code>a = 42</code>.</p>
<p>Pochopení principu <em>adresy</em> a <em>dereference</em> je zásadní v pochopení ukazatelů!</p>
<h3 id="jak-může-funkce-přepsat-hodnotu-předávaného-argumentu">Jak může funkce přepsat hodnotu předávaného argumentu?</h3>
<p><em>Zdrojový kód:</em></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#57606a">#include</span> <span style="color:#57606a">&lt;iostream&gt;</span><span style="color:#57606a">
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span><span style="color:#cf222e">using</span> <span style="color:#cf222e">namespace</span> std<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">int</span> <span style="color:#6639ba">funkce1</span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span> b<span style="color:#1f2328">){</span>
</span></span><span style="display:flex;"><span>    b <span style="color:#0550ae">=</span> <span style="color:#0550ae">42</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">int</span> <span style="color:#6639ba">funkce2</span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span> <span style="color:#0550ae">*</span>p<span style="color:#1f2328">){</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">*</span>p <span style="color:#0550ae">=</span> <span style="color:#0550ae">42</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">int</span> <span style="color:#6639ba">main</span><span style="color:#1f2328">()</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">int</span> a <span style="color:#0550ae">=</span> <span style="color:#0550ae">4</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0a3069">&#34;Hodnota promenne &#39;a&#39; -&gt; &#34;</span><span style="color:#0550ae">&lt;&lt;</span> a <span style="color:#0550ae">&lt;&lt;</span> endl<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    funkce1<span style="color:#1f2328">(</span>a<span style="color:#1f2328">);</span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0a3069">&#34;Hodnota promenne &#39;a&#39; -&gt; &#34;</span><span style="color:#0550ae">&lt;&lt;</span> a <span style="color:#0550ae">&lt;&lt;</span> endl<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    funkce2<span style="color:#1f2328">(</span><span style="color:#0550ae">&amp;</span>a<span style="color:#1f2328">);</span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0a3069">&#34;Hodnota promenne &#39;a&#39; -&gt; &#34;</span><span style="color:#0550ae">&lt;&lt;</span> a <span style="color:#0550ae">&lt;&lt;</span> endl<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">return</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span>
</span></span></code></pre></div><p><em>Výpis:</em></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>Hodnota promenne &#39;a&#39; -&gt; 4
</span></span><span style="display:flex;"><span>Hodnota promenne &#39;a&#39; -&gt; 4
</span></span><span style="display:flex;"><span>Hodnota promenne &#39;a&#39; -&gt; 42
</span></span></code></pre></div><p><em>Vysvětlení:</em>
Parametry funkce jsou <em>vždy</em> zkopírované argumenty, které při volání předáváme.
Takže když jsme zavolali <code>funkce1(a)</code>, tak se hodnota proměnné <code>a</code> zkopírovala a když jsme ji poté přepsali, tak jsme přepsali kopii a originál zůstal nezměněn.
Při volání <code>funkce2(&amp;a)</code> jsme předali adresu místo hodnoty, předaná adresa se zkopírovala do proměnné <code>p</code>.
Hodnotu proměnné <code>p</code> jsme neměnili, ale použili jsme ji k přístupu do paměti na místo proměnné <code>a</code>.
Při změně <code>*p</code> se tedy měnila hodnota proměnné <code>a</code>, a tak byly změny hodnoty permanentní.</p>
<p>V mnoha jazicích (i v c++) lze navíc předat argumenty funkce <em>referencí</em>.
Samotné předání pak vypadá jako <code>funkce3(a)</code>, ale hodnota <code>a</code> může být přepsána.
Takto to například funguje pro neprimitovní hodnoty v pythonu či javě.
Předání reference je pouze syntaktický fígl, který se nakonec stejně překládá na předání ukazatele.</p>
<h3 id="ukazatele-na-ukazatele">Ukazatele na ukazatele</h3>
<p><em>Zdrojový kód:</em></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#57606a">#include</span> <span style="color:#57606a">&lt;iostream&gt;</span><span style="color:#57606a">
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span><span style="color:#cf222e">using</span> <span style="color:#cf222e">namespace</span> std<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">int</span> <span style="color:#6639ba">main</span><span style="color:#1f2328">()</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">int</span> a <span style="color:#0550ae">=</span> <span style="color:#0550ae">4</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">int</span> <span style="color:#0550ae">*</span>b <span style="color:#0550ae">=</span> <span style="color:#0550ae">&amp;</span>a<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">int</span> <span style="color:#0550ae">**</span>c <span style="color:#0550ae">=</span> <span style="color:#0550ae">&amp;</span>b<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">int</span> <span style="color:#0550ae">***</span>d <span style="color:#0550ae">=</span> <span style="color:#0550ae">&amp;</span>c<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">int</span> <span style="color:#0550ae">****</span>e <span style="color:#0550ae">=</span> <span style="color:#0550ae">&amp;</span>d<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">int</span> <span style="color:#0550ae">*****</span>f <span style="color:#0550ae">=</span> <span style="color:#0550ae">&amp;</span>e<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">int</span> <span style="color:#0550ae">******</span>g <span style="color:#0550ae">=</span> <span style="color:#0550ae">&amp;</span>f<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">int</span> <span style="color:#0550ae">*******</span>h <span style="color:#0550ae">=</span> <span style="color:#0550ae">&amp;</span>g<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">int</span> <span style="color:#0550ae">********</span>i <span style="color:#0550ae">=</span> <span style="color:#0550ae">&amp;</span>h<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">int</span> <span style="color:#0550ae">*********</span>j <span style="color:#0550ae">=</span> <span style="color:#0550ae">&amp;</span>i<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">int</span> <span style="color:#0550ae">**********</span>k <span style="color:#0550ae">=</span> <span style="color:#0550ae">&amp;</span>j<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#0550ae">&lt;&lt;</span> a <span style="color:#0550ae">&lt;&lt;</span> endl<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0550ae">&amp;</span>a <span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0a3069">&#34; &#34;</span> <span style="color:#0550ae">&lt;&lt;</span> b <span style="color:#0550ae">&lt;&lt;</span> endl<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">**********</span>k <span style="color:#0550ae">=</span> <span style="color:#0550ae">20</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#0550ae">&lt;&lt;</span> a <span style="color:#0550ae">&lt;&lt;</span> endl<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0550ae">&amp;</span>a <span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0a3069">&#34; &#34;</span> <span style="color:#0550ae">&lt;&lt;</span> b <span style="color:#0550ae">&lt;&lt;</span> endl<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">*********</span>k <span style="color:#0550ae">=</span> <span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#0550ae">*</span><span style="color:#1f2328">)</span><span style="color:#0550ae">20</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#57606a">//**********k = 20; // segfault!
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#0550ae">&lt;&lt;</span> a <span style="color:#0550ae">&lt;&lt;</span> endl<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0550ae">&amp;</span>a <span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0a3069">&#34; &#34;</span> <span style="color:#0550ae">&lt;&lt;</span> b <span style="color:#0550ae">&lt;&lt;</span> endl<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">return</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span>
</span></span></code></pre></div><p><em>Výpis:</em></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>4
</span></span><span style="display:flex;"><span>0x23cab4 0x23cab4
</span></span><span style="display:flex;"><span>20
</span></span><span style="display:flex;"><span>0x23cab4 0x23cab4
</span></span><span style="display:flex;"><span>20
</span></span><span style="display:flex;"><span>0x23cab4 0x14
</span></span></code></pre></div><p><em>Vysvětlení:</em>
Ukazatele můžou ukazovat na jiné ukazatele.
Ukazatel typu <code>int**</code> ukazuje na proměnnou typu <code>int*</code> apod.
V tomto příkladu jsme vytvořili řetězec ukazatelů hloubky 10.
Abychom dereferencovali ukazatel <code>k</code> až k hodnotě <code>a</code> musíme použít 10 hvězdiček (každá nás posune v řetězci na další ukazatel &ndash; blíže k proměnné a).
Když použijeme hvězdiček 9, tak nastavujeme hodnotu proměnné <code>b</code>.
Pokud se potom budeme snažit o přístup k proměnné <code>a</code>, tak se k ní nemůžeme dostat, protože na ni ukazatel <code>b</code> neukazuje.
Proměnná <code>b</code> ukazuje do paměti na adresu <code>0x14</code> (to je hexadecimálně 20).
Tento úsek paměti nepatří našemu programu a pokud do něj budeme chtít zapsat, tak program spadne (segfault).</p>
<h3 id="ukazatel-jsou-taky-jen-0ly-a-1ky">Ukazatel jsou taky jen 0ly a 1ky</h3>
<p><em>Zdrojový kód:</em> (při kompilaci dostanete warning)</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#57606a">#include</span> <span style="color:#57606a">&lt;iostream&gt;</span><span style="color:#57606a">
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span><span style="color:#cf222e">using</span> <span style="color:#cf222e">namespace</span> std<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">int</span> <span style="color:#6639ba">main</span><span style="color:#1f2328">()</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">int</span> a <span style="color:#0550ae">=</span> <span style="color:#0550ae">4</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">int</span> b <span style="color:#0550ae">=</span> <span style="color:#0550ae">54</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0a3069">&#34;Hodnota promenne &#39;a, b&#39; -&gt; &#34;</span><span style="color:#0550ae">&lt;&lt;</span> a <span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0a3069">&#34;, &#34;</span> <span style="color:#0550ae">&lt;&lt;</span> b <span style="color:#0550ae">&lt;&lt;</span> endl<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">int</span> c<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    c <span style="color:#0550ae">=</span> b<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    b <span style="color:#0550ae">=</span> a<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    a <span style="color:#0550ae">=</span> c<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0a3069">&#34;Hodnota promenne &#39;a, b&#39; -&gt; &#34;</span><span style="color:#0550ae">&lt;&lt;</span> a <span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0a3069">&#34;, &#34;</span> <span style="color:#0550ae">&lt;&lt;</span> b <span style="color:#0550ae">&lt;&lt;</span> endl<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">int</span> <span style="color:#0550ae">*</span> p <span style="color:#0550ae">=</span> <span style="color:#0550ae">&amp;</span>c<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">*</span>p <span style="color:#0550ae">=</span> b<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    b <span style="color:#0550ae">=</span> a<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    a <span style="color:#0550ae">=</span> <span style="color:#0550ae">*</span>p<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0a3069">&#34;Hodnota promenne &#39;a, b&#39; -&gt; &#34;</span><span style="color:#0550ae">&lt;&lt;</span> a <span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0a3069">&#34;, &#34;</span> <span style="color:#0550ae">&lt;&lt;</span> b <span style="color:#0550ae">&lt;&lt;</span> endl<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    p <span style="color:#0550ae">=</span> <span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#0550ae">*</span><span style="color:#1f2328">)</span>b<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    b <span style="color:#0550ae">=</span> a<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    a <span style="color:#0550ae">=</span> <span style="color:#1f2328">(</span><span style="color:#cf222e">long</span><span style="color:#1f2328">)</span>p<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0a3069">&#34;Hodnota promenne &#39;a, b&#39; -&gt; &#34;</span><span style="color:#0550ae">&lt;&lt;</span> a <span style="color:#0550ae">&lt;&lt;</span> <span style="color:#0a3069">&#34;, &#34;</span> <span style="color:#0550ae">&lt;&lt;</span> b <span style="color:#0550ae">&lt;&lt;</span> endl<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">return</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span>
</span></span></code></pre></div><p><em>Výpis:</em></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>Hodnota promenne &#39;a, b&#39; -&gt; 4, 54
</span></span><span style="display:flex;"><span>Hodnota promenne &#39;a, b&#39; -&gt; 54, 4
</span></span><span style="display:flex;"><span>Hodnota promenne &#39;a, b&#39; -&gt; 4, 54
</span></span><span style="display:flex;"><span>Hodnota promenne &#39;a, b&#39; -&gt; 54, 4
</span></span></code></pre></div><p><em>Vysvětlení:</em>
První sekce je normální prohození proměnných pomocí třetí proměnné.
Druhá sekce nahradila proměnnou <code>c</code> ukazatelem na proměnnou <code>c</code>, všiměte si, že je to stejné jako v prvním případě, jen jsou tam navíc hvězdičky.
Třetí sekce ukládá hodnotu přímo do <code>p</code>, Ano, tam má sice být adresa, ale můžete tam klidně uložit i hodnotu té proměnné!
Ale kdybychom to dereferencovali <code>*p</code>, tak bychom se v paměti dostali na nesmyslná data.
Velikost datového typu ukazatele <code>int*</code> závisí na architektuře (32 vs 64 bitové procesory), proto nejsou takového operace úplně bezpečné.</p>
<h3 id="další-reference">Další reference</h3>
<p><a href="http://www.cplusplus.com/doc/tutorial/pointers/"target="_blank">http://www.cplusplus.com/doc/tutorial/pointers/<span style="white-space: nowrap;">&thinsp;↗</span></a></p>

        </div>
    </div>
</div>

<div class="footer">
    <ul class="pad-content">

        <li>
            © Václav Blažej
            
                2023
            
        </li>
        

        

        
    </ul>
    <ul title="Last update of the website" class="pull-right pad">5. September 2025</ul>
</div>

<script type="text/javascript">
    $("#toggle-btn").click(function(){
        $("#toggle-content").toggle();
        if($(this).html() === "☰") {
            $(this).html("X")
        } else {
            $(this).html("☰")
        }
    });
    $(window).resize(function(){
        if(window.innerWidth > 768) {
            $(".desktop").removeAttr("style");
        }
    });
</script>
</body>
</html>

