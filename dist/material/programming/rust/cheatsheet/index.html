<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>
        
            Rust cheetsheet - Homepage of Vašek
        
    </title>
    <meta name="description" content="Homepage of Vašek">
    <meta name="author" content="Václav Blažej">

    
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <link href="https://vaclavblazej.github.io//font/fonts.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://vaclavblazej.github.io/css/fonts.css">

    
    <script src="https://vaclavblazej.github.io/js/custom.js"></script>
    <link rel="stylesheet" href="https://vaclavblazej.github.io/css/custom.css">

    <link rel="shortcut icon" href="https://vaclavblazej.github.io//favicon.ico" />

    

    
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [ ['$','$'] ],
                displayMath: [ ["\\[","\\]"] ],
                processEscapes: true,
                autoload: {
                    color: [],
                    colorv2: ['color']
                },
                packages: {'[+]': ['noerrors']}
            },
            options: {
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process',
                renderActions: {
                    addMenu: [0, '', '']
                }
            },
            loader: {
                load: ['[tex]/noerrors']
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script"></script>

    <script src="https://vaclavblazej.github.io/js/jquery.min.js" type="text/javascript"></script>

</head>
<body>

<div class="header noprint">
    
    <div class="desktop nav-menu">
        <a href="https://vaclavblazej.github.io/" class="site-title pad">Homepage of Vašek</a>
        <ul>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/">Material</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/post/">Blog</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/teaching/">Teaching</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/pub/">Research</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/about/">About</a>
            </li>
            
        </ul>
    </div>
    <div class="mobile nav-menu">
        <a href="https://vaclavblazej.github.io/" class="site-title pad">Homepage of Vašek</a>
        <a href="#" id="toggle-btn">&#9776;</a>
    </div>
    <div>
        <ul id="toggle-content" style="display:none;">
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/">Material</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/post/">Blog</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/teaching/">Teaching</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/pub/">Research</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/about/">About</a>
            </li>
            
        </ul>
    </div>
</div>



<div class="content">
    
    <div class="post">
        <div class="post-title">
            <p class="footnote">
                


    <time datetime="2021-12-29T00:00:00Z" class="post-list timeago">29.12.2021</time>












            </p>
            <h1>Rust cheetsheet</h1>

            

        </div>
        <div class="post-content">
            <p>This page serves as a quick reference constructions in Rust programming language.
Knowledge of the language is assumed so the code explained minimally.
However, for a skilled programmer this page may serve as a syntax reference.</p>
<h1 id="main-and-prints">Main and prints</h1>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">fn</span> <span style="color:#900;font-weight:bold">main</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic">// todo here
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">fn</span> <span style="color:#900;font-weight:bold">function</span>(par1: <span style="color:#458;font-weight:bold">Type</span>,<span style="color:#bbb"> </span>par2: <span style="color:#458;font-weight:bold">Type</span>)<span style="color:#bbb"> </span>-&gt; <span style="color:#458;font-weight:bold">ReturnType</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>expressions;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">let</span><span style="color:#bbb"> </span>val<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>function2(par1,<span style="color:#bbb"> </span>par2,<span style="color:#bbb"> </span>par3);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>returned_value<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// or return returned_value;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><ul>
<li><code>format!</code>, <code>print!</code> (<code>println!</code>), and <code>eprint!</code> for string formatting and printing</li>
<li><code>format!(&quot;{} {:b} {:.5} {1:&gt;20} {1:0&gt;width}&quot;,&quot;first&quot;,&quot;one&quot;,width=3);</code> prints in binary, decimals, alligned, and 0-alligned</li>
<li>traits <code>fmt::Debug</code> is used by <code>{:?}</code>, and <code>fmt::Display</code> is used by <code>{}</code> (see later); json style print <code>{:#?}</code></li>
<li><code>use std::fmt;</code> imports <code>fmt</code></li>
<li><code>write!(buf, &quot;val: {}&quot;, val)</code> writes formatted data into a buffer.</li>
<li><code>struct Structure(i32, String);</code></li>
<li>return keyword exists, but we can just leave out <code>;</code> after the last command to return its result</li>
</ul>
<p>Implement display for a structure to be able to format/print it with <code>{}</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">impl</span><span style="color:#bbb"> </span>fmt::Display<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">for</span><span style="color:#bbb"> </span>Structure<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">fn</span> <span style="color:#900;font-weight:bold">fmt</span>(<span style="color:#000;font-weight:bold">&amp;</span><span style="color:#999">self</span>,<span style="color:#bbb"> </span>f: <span style="color:#000;font-weight:bold">&amp;</span><span style="color:#458;font-weight:bold">mut</span><span style="color:#bbb"> </span>fmt::Formatter)<span style="color:#bbb"> </span>-&gt; <span style="color:#458;font-weight:bold">fmt</span>::<span style="color:#0086b3">Result</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>write!(f,<span style="color:#bbb"> </span><span style="color:#d14">&#34;{}&#34;</span>,<span style="color:#bbb"> </span><span style="color:#999">self</span>.<span style="color:#099">0</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><ul>
<li><code>#[derive(Debug)]</code> autoimplements <code>fmt::Debug</code> trait</li>
<li><code>?</code> after a function which returns <code>Result</code> makes it so that if error occurs the error is returned immediately</li>
<li><code>vec![1, 2, 3]</code> macro to create vector instance with given entries</li>
</ul>
<h1 id="types-and-operators">Types and operators</h1>
<ul>
<li>signed integers: <code>i8</code>, <code>i16</code>, <code>i32</code>, <code>i64</code>, <code>i128</code> and <code>isize</code> (pointer size) as <code>7</code> or <code>7i32</code> (or <code>10x</code>, <code>10011b</code>, etc.)</li>
<li>unsigned integers: <code>u8</code>, <code>u16</code>, <code>u32</code>, <code>u64</code>, <code>u128</code> and <code>usuze</code> (pointer size) as <code>7u32</code></li>
<li>floating point: <code>f32</code>, <code>f64</code> as <code>7.1</code> or <code>7.1f64</code></li>
<li>unicode characters: <code>char</code> as <code>'a'</code> or <code>'☺'</code></li>
<li>boolean: <code>bool</code> as <code>true</code> or <code>false</code></li>
<li>static string: <code>str</code> as <code>&quot;abc&quot;</code></li>
<li>arrays: <code>i32[]</code> as <code>[1,2,3]</code></li>
<li>tuples: <code>(i32,f64,bool,(str,i32))</code> as <code>(1,2,true,(&quot;inner tuple&quot;,3))</code></li>
<li>unit type: <code>()</code> as <code>()</code></li>
</ul>
<p>Types can be explicit with <code>:</code> or inferred, but not dynamic.
We can cast one type to another with <code>as</code> keyword as <code>var as i32</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">let</span><span style="color:#bbb"> </span>logical: <span style="color:#458;font-weight:bold">bool</span> <span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">let</span><span style="color:#bbb"> </span>a_float: <span style="color:#458;font-weight:bold">f64</span> <span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#099">1.0</span>;<span style="color:#bbb">  </span><span style="color:#998;font-style:italic">// Regular annotation
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">let</span><span style="color:#bbb"> </span>an_integer<span style="color:#bbb">   </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#099">5</span><span style="color:#000;font-weight:bold">i32</span>;<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// Suffix annotation
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">let</span><span style="color:#bbb"> </span>default_float<span style="color:#bbb">   </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#099">3.0</span>;<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// default `f64`
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">let</span><span style="color:#bbb"> </span>default_integer<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#099">7</span>;<span style="color:#bbb">   </span><span style="color:#998;font-style:italic">// default `i32`
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">let</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">mut</span><span style="color:#bbb"> </span>inferred_type<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#099">3</span>;<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// Type i64 is inferred from the next line
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>inferred_type<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#099">4294967296</span><span style="color:#000;font-weight:bold">i64</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">let</span><span style="color:#bbb"> </span>inferred_type<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span>;<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// shadowing
</span></span></span></code></pre></div><ul>
<li>typical operators <code>+</code> <code>-</code> <code>&amp;&amp;</code> <code>||</code> <code>!</code> <code>&amp;</code> <code>|</code> <code>^</code> <code>&lt;&lt;</code> <code>&gt;&gt;</code></li>
<li>numbers can be interleaved with <code>_</code> for readibility as <code>1_000_000u32</code></li>
<li>creating tuples <code>let t = (1,2,3,var);</code></li>
<li>destructuring tuples <code>let (a,b,c,d) = t;</code></li>
<li>type of an array is <code>[type; length]</code> as <code>[i32; 5]</code> for <code>[1,2,3,4,5]</code> or for a fixed value <code>[1; 5]</code></li>
<li>slice is a pointer to a subarray created as <code>&amp;arr[1 .. 4]</code></li>
</ul>
<p>Custom types <code>struct</code> and <code>enum</code> (<code>const</code> and <code>static</code>).
There are three types of structures.</p>
<ul>
<li>classic structs
<ul>
<li>Instantiate with <code>Struct {3, 5}</code> or <code>Struct {x: 3, y: 5}</code> but also with just <code>Struct {x, y}</code> when the fields and variable names coincide.</li>
<li>One can construct an object based on another (struct update) as <code>let struct = Struct {x: 3, ..other_struct};</code>.</li>
<li>Destructure by <code>let Struct { x: left, y: right } = point;</code></li>
</ul>
</li>
<li>tuple structs / named tuples
<ul>
<li>Instantiate with <code>let pair = Pair(1, 2);</code></li>
<li>Access with <code>pair.0</code> and <code>pair.1</code></li>
<li>Deconstruct with <code>let Pair(a, b) = pair;</code></li>
</ul>
</li>
<li>unit structs, which are empty but named</li>
</ul>
<p>Desconstruction can be nested, e.g. <code>let Rectangle{top_left:Point{x:a,y:b},bottom_right:Point{x:c,y:d}} = r;</code></p>
<p><code>enum</code> contains exactly one of its defined values.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">enum</span> <span style="color:#458;font-weight:bold">Event</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>PageLoad,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>KeyPress(<span style="color:#458;font-weight:bold">char</span>),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>Click<span style="color:#bbb"> </span>{<span style="color:#bbb"> </span>x: <span style="color:#458;font-weight:bold">i64</span>,<span style="color:#bbb"> </span>y: <span style="color:#458;font-weight:bold">i64</span> },<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><p>These are by default numbered from <code>0</code>.
If we set <code>Val = 3,</code> in the enum, then that value is used instead.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">fn</span> <span style="color:#900;font-weight:bold">inspect</span>(event: <span style="color:#458;font-weight:bold">Event</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">match</span><span style="color:#bbb"> </span>event<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>Event::PageLoad<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=&gt;</span><span style="color:#bbb"> </span>println!(<span style="color:#d14">&#34;page loaded&#34;</span>),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>Event::KeyPress(c)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=&gt;</span><span style="color:#bbb"> </span>println!(<span style="color:#d14">&#34;pressed &#39;</span><span style="color:#d14">{}</span><span style="color:#d14">&#39;.&#34;</span>,<span style="color:#bbb"> </span>c),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>Event::Click<span style="color:#bbb"> </span>{<span style="color:#bbb"> </span>x,<span style="color:#bbb"> </span>y<span style="color:#bbb"> </span>}<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=&gt;</span><span style="color:#bbb"> </span>{<span style="color:#bbb"> </span>println!(<span style="color:#d14">&#34;clicked at x=</span><span style="color:#d14">{}</span><span style="color:#d14">, y=</span><span style="color:#d14">{}</span><span style="color:#d14">.&#34;</span>,<span style="color:#bbb"> </span>x,<span style="color:#bbb"> </span>y);<span style="color:#bbb"> </span>},<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><ul>
<li>Type aliases <code>type Op = LongOperationsStructName</code> or <code>type IoResult&lt;T&gt; = Result&lt;T, IoError&gt;</code>.</li>
<li>In struct methods, one can refer to the object with default alias <code>Self</code></li>
<li><code>use</code> keyword defaults values to a given namespace as follows</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">use</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">crate</span>::Status::{Poor,<span style="color:#bbb"> </span>Rich};<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// list where we do not have to use Status::Rich but just Rich
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">use</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">crate</span>::Work::<span style="color:#000;font-weight:bold">*</span>;<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// include all
</span></span></span></code></pre></div><p>When using <code>match</code>, one can use <code>Some(ref n)</code> to avoid moving n.
This is quite different from <code>Some(&amp;ref)</code> as <code>ref</code> is not matched against (otherwise a reference is expected).</p>
<p>There are two types of constants: <code>const</code> and <code>static</code>.</p>
<p>Values which may be null are enclosed in <code>Option&lt;T&gt;</code> and may contain either <code>Null</code> or <code>Some&lt;T&gt;</code> which can be recognized with <code>match</code>.</p>
<p>Retype value with <code>as</code> keyword as <code>x as i32</code>; note that it does not overflow but saturates.
To for an overflow we have to use <code>unsafe</code> together with e.g. <code>300.to_int_unchecked::&lt;u8&gt;()</code> function.
We can measure size of values by <code>std::mem::size_of_val(&amp;val)</code>.</p>
<p>Covert with <code>From</code>, <code>Into</code>, and failable <code>TryFrom</code> and <code>TryInto</code>.
Convert with string using <code>fmt::Display</code> and <code>FromStr</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">use</span><span style="color:#bbb"> </span>std::convert::<span style="color:#0086b3">From</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#999;font-weight:bold;font-style:italic">#[derive(Debug)]</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">struct</span> <span style="color:#458;font-weight:bold">Number</span><span style="color:#bbb"> </span>{<span style="color:#bbb"> </span>value: <span style="color:#458;font-weight:bold">i32</span>,<span style="color:#bbb"> </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">impl</span><span style="color:#bbb"> </span><span style="color:#0086b3">From</span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#458;font-weight:bold">i32</span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">for</span><span style="color:#bbb"> </span>Number<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">fn</span> <span style="color:#900;font-weight:bold">from</span>(item: <span style="color:#458;font-weight:bold">i32</span>)<span style="color:#bbb"> </span>-&gt; <span style="color:#458;font-weight:bold">Self</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>Number<span style="color:#bbb"> </span>{<span style="color:#bbb"> </span>value: <span style="color:#458;font-weight:bold">item</span><span style="color:#bbb"> </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">let</span><span style="color:#bbb"> </span>val<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#099">30</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">let</span><span style="color:#bbb"> </span>num<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>Number::from(val);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">let</span><span style="color:#bbb"> </span>num: <span style="color:#458;font-weight:bold">Number</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>val.into();<span style="color:#bbb">
</span></span></span></code></pre></div><p>Basic flow of control examples:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>cond<span style="color:#bbb"> </span>{<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// basic if/else
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>}<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>cond<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">loop</span><span style="color:#bbb"> </span>{<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// basically while true
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic">// use continue &amp; break
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// continue &amp; break outer loops with labels
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// and return values from cycles
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">let</span><span style="color:#bbb"> </span>res<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#008080">&#39;go</span>: <span style="color:#458;font-weight:bold">loop</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">loop</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">break</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">&#39;go</span><span style="color:#bbb"> </span><span style="color:#099">2</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>};<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// assignment needs to be ended with ;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">while</span><span style="color:#bbb"> </span>cond<span style="color:#bbb"> </span>{<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// usual while loop
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#bbb">    </span>cond<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>};<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">for</span><span style="color:#bbb"> </span>n<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">in</span><span style="color:#bbb"> </span><span style="color:#099">1</span><span style="color:#000;font-weight:bold">..</span><span style="color:#099">101</span><span style="color:#bbb"> </span>{<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">for</span><span style="color:#bbb"> </span>n<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">in</span><span style="color:#bbb"> </span><span style="color:#099">1</span><span style="color:#000;font-weight:bold">..=</span><span style="color:#099">100</span><span style="color:#bbb"> </span>{<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>}<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// inclusive range
</span></span></span></code></pre></div><p><code>Iterator</code> can be created with</p>
<ul>
<li><code>into_iter</code> which consumes (moves) the collection</li>
<li><code>iter</code> which borrows each element</li>
<li><code>iter_mut</code> which mutably borrows each element</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">match</span><span style="color:#bbb"> </span>num<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#099">1</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>,<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// matches 1
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#bbb">    </span><span style="color:#099">2</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#099">3</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>,<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// this matches 2 or 3
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#bbb">    </span><span style="color:#099">4</span><span style="color:#000;font-weight:bold">..</span><span style="color:#099">9</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>,<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// matching range
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#bbb">    </span>n<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">@</span><span style="color:#bbb"> </span><span style="color:#099">5</span><span style="color:#000;font-weight:bold">..=</span><span style="color:#099">13</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>,<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// binding (useful for matching functions)
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#bbb">    </span>_<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>,<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// anything else
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">match</span><span style="color:#bbb"> </span>triple<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>(<span style="color:#099">0</span>,<span style="color:#bbb"> </span>y,<span style="color:#bbb"> </span>z)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>(<span style="color:#099">1</span>,<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>_<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">match</span><span style="color:#bbb"> </span>structure<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>St<span style="color:#bbb"> </span>{<span style="color:#bbb"> </span>x: (<span style="color:#099">1</span>,<span style="color:#bbb"> </span>b),<span style="color:#bbb"> </span>y<span style="color:#bbb"> </span>}<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>St<span style="color:#bbb"> </span>{<span style="color:#bbb"> </span>x: <span style="color:#099">2</span>,<span style="color:#bbb"> </span>y: <span style="color:#458;font-weight:bold">i</span><span style="color:#bbb"> </span>}<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>St<span style="color:#bbb"> </span>{<span style="color:#bbb"> </span>x,<span style="color:#bbb"> </span>y<span style="color:#bbb"> </span>}<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>x<span style="color:#000;font-weight:bold">==</span>y<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>,<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// so-called guard
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#bbb">    </span>St<span style="color:#bbb"> </span>{<span style="color:#bbb"> </span>x,<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span><span style="color:#bbb"> </span>}<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">match</span><span style="color:#bbb"> </span>enumvar<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>Enm::Var1<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>Enm::Var2(x,<span style="color:#bbb"> </span>y)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic">// no need for default if all cases are covered
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><p>Reference can be dereferenced with <code>*</code>.
Destructuring uses <code>&amp;</code>, <code>ref</code>, and <code>ref mut</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">let</span><span style="color:#bbb"> </span>varref<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&amp;</span><span style="color:#099">4</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">let</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">ref</span><span style="color:#bbb"> </span>varref<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#099">3</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">match</span><span style="color:#bbb"> </span>varref<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">&amp;</span>val<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">match</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">*</span>varref<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>val<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">let</span><span style="color:#bbb"> </span>var<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#099">3</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">match</span><span style="color:#bbb"> </span>var<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">ref</span><span style="color:#bbb"> </span>val<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">match</span><span style="color:#bbb"> </span>var<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">ref</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">mut</span><span style="color:#bbb"> </span>val<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">let</span><span style="color:#bbb"> </span><span style="color:#0086b3">Some</span>(i)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>number<span style="color:#bbb"> </span>{<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">let</span><span style="color:#bbb"> </span>Foo::Bar<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>a<span style="color:#bbb"> </span>{<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">while</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">let</span><span style="color:#bbb"> </span><span style="color:#0086b3">Some</span>(i)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>number<span style="color:#bbb"> </span>{<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>}<span style="color:#bbb">
</span></span></span></code></pre></div><p>Functions</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">fn</span> <span style="color:#900;font-weight:bold">func1</span>(var: <span style="color:#458;font-weight:bold">i32</span>,<span style="color:#bbb"> </span>var2: <span style="color:#458;font-weight:bold">i32</span>)<span style="color:#bbb"> </span>-&gt; <span style="color:#458;font-weight:bold">bool</span> {<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>rhs<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">==</span><span style="color:#bbb"> </span><span style="color:#099">0</span><span style="color:#bbb"> </span>{<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb"> </span>}<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// return from middle
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#bbb">    </span>lhs<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">%</span><span style="color:#bbb"> </span>rhs<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">==</span><span style="color:#bbb"> </span><span style="color:#099">0</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// last expression returned when ; is omitted
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">fn</span> <span style="color:#900;font-weight:bold">func2</span>(var: <span style="color:#458;font-weight:bold">i32</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>}<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// same as -&gt; ()
</span></span></span></code></pre></div><p>Methods, closures</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">fn</span> <span style="color:#900;font-weight:bold">consume</span>(<span style="color:#999">self</span>)<span style="color:#bbb"> </span>-&gt; <span style="color:#458;font-weight:bold">Self</span><span style="color:#bbb"> </span>{<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>}<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// Consuming `self`
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">fn</span> <span style="color:#900;font-weight:bold">borrow</span>(<span style="color:#000;font-weight:bold">&amp;</span><span style="color:#999">self</span>)<span style="color:#bbb"> </span>-&gt; <span style="color:#000;font-weight:bold">&amp;</span><span style="color:#458;font-weight:bold">i32</span> {<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>}<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// Borrowing `self`.
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">fn</span> <span style="color:#900;font-weight:bold">borrow_mut</span>(<span style="color:#000;font-weight:bold">&amp;</span><span style="color:#000;font-weight:bold">mut</span><span style="color:#bbb"> </span><span style="color:#999">self</span>)<span style="color:#bbb"> </span>-&gt; <span style="color:#000;font-weight:bold">&amp;</span><span style="color:#458;font-weight:bold">mut</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">i32</span><span style="color:#bbb"> </span>{<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>}<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// Borrowing `self` mutably.
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// closure captures variable x by first possible of: &amp;,  &amp;mut,  value
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//                   respective traits for these are Fn, FnMut, FnOnce
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">let</span><span style="color:#bbb"> </span>closure<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span>i: <span style="color:#458;font-weight:bold">i32</span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>-&gt; <span style="color:#458;font-weight:bold">i32</span> {<span style="color:#bbb"> </span>i<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>x<span style="color:#bbb"> </span>};<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// i32 can be inferred both parameter &amp; return
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// the value of x is now borrowed as reference upto the last use of the closure
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">let</span><span style="color:#bbb"> </span>res<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>closure();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">let</span><span style="color:#bbb"> </span>forcedmove<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">move</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span>j<span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>-&gt; {<span style="color:#bbb"> </span>j<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>y<span style="color:#bbb"> </span>};<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// take ownership of y
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// use closures as parameters using generics
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">fn</span> <span style="color:#900;font-weight:bold">apply</span><span style="color:#000;font-weight:bold">&lt;</span>F<span style="color:#000;font-weight:bold">&gt;</span>(f: <span style="color:#458;font-weight:bold">F</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">where</span><span style="color:#bbb"> </span>F: <span style="color:#0086b3">Fn</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb"> </span>f();<span style="color:#bbb"> </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">fn</span> <span style="color:#900;font-weight:bold">call_me</span><span style="color:#000;font-weight:bold">&lt;</span>F: <span style="color:#0086b3">Fn</span>()<span style="color:#000;font-weight:bold">&gt;</span>(f: <span style="color:#458;font-weight:bold">F</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb"> </span>f();<span style="color:#bbb"> </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// function may also be supplied in place of closure
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">fn</span> <span style="color:#900;font-weight:bold">function</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>call_me(function);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// return closures as &#39;some&#39; type which implements a given trait
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">fn</span> <span style="color:#900;font-weight:bold">create_fn</span>()<span style="color:#bbb"> </span>-&gt; <span style="color:#458;font-weight:bold">impl</span><span style="color:#bbb"> </span><span style="color:#0086b3">Fn</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>}<span style="color:#bbb">
</span></span></span></code></pre></div><p>Higher order fuctions are used like this:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">let</span><span style="color:#bbb"> </span>sum_of_squared_odd_numbers: <span style="color:#458;font-weight:bold">u32</span> <span style="color:#000;font-weight:bold">=</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>(<span style="color:#099">0</span><span style="color:#000;font-weight:bold">..</span>).map(<span style="color:#000;font-weight:bold">|</span>n<span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>n<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">*</span><span style="color:#bbb"> </span>n)<span style="color:#bbb">                             </span><span style="color:#998;font-style:italic">// All natural numbers squared
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#bbb">         </span>.take_while(<span style="color:#000;font-weight:bold">|&amp;</span>n_squared<span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>n_squared<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#bbb"> </span>upper)<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// Below upper limit
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#bbb">         </span>.filter(<span style="color:#000;font-weight:bold">|&amp;</span>n_squared<span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>is_odd(n_squared))<span style="color:#bbb">     </span><span style="color:#998;font-style:italic">// That are odd
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#bbb">         </span>.fold(<span style="color:#099">0</span>,<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span>acc,<span style="color:#bbb"> </span>n_squared<span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>acc<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>n_squared);<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// Sum them
</span></span></span></code></pre></div><p>A function may not return control to its called when it purpusefuly <code>panic!</code>s.
This is represented by type marked as <code>!</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">let</span><span style="color:#bbb"> </span>x: <span style="color:#000;font-weight:bold">!</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>panic!(<span style="color:#d14">&#34;oh no!&#34;</span>);<span style="color:#bbb">
</span></span></span></code></pre></div><p>A function which can end in error should return <code>Result&lt;okType,errType&gt;</code>.
Return type has a built-in feature: typing <code>?</code> after function which returns <code>Result</code> returns error immediately if error occurs, or gives the value if Ok was the result.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">fn</span> <span style="color:#900;font-weight:bold">fun</span>(val: <span style="color:#458;font-weight:bold">i32</span>)<span style="color:#bbb"> </span>-&gt; <span style="color:#0086b3">Result</span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#458;font-weight:bold">i32</span>,<span style="color:#0086b3">String</span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#0086b3">Ok</span>(val)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#000;font-weight:bold">else</span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#0086b3">Err</span>(<span style="color:#d14">&#34;bad value&#34;</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">fn</span> <span style="color:#900;font-weight:bold">main</span>()<span style="color:#bbb"> </span>-&gt; <span style="color:#0086b3">Result</span><span style="color:#000;font-weight:bold">&lt;</span>_,<span style="color:#0086b3">String</span><span style="color:#000;font-weight:bold">&gt;</span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">let</span><span style="color:#bbb"> </span>res: <span style="color:#0086b3">Result</span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#458;font-weight:bold">i32</span>,<span style="color:#0086b3">String</span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>fun(<span style="color:#099">2</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">match</span><span style="color:#bbb"> </span>res<span style="color:#bbb"> </span>{<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// result contains enum
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#bbb">        </span><span style="color:#0086b3">Ok</span>(int)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#0086b3">Err</span>(err)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">let</span><span style="color:#bbb"> </span>val: <span style="color:#458;font-weight:bold">i32</span> <span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>fun(<span style="color:#099">3</span>)<span style="color:#000;font-weight:bold">?</span>;<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// Err case propagates up
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><p>Todo: Option<T></p>
<p>Generics</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">fn</span> <span style="color:#900;font-weight:bold">fun</span><span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;</span>(list: <span style="color:#000;font-weight:bold">&amp;</span>[T])<span style="color:#bbb"> </span>-&gt; <span style="color:#458;font-weight:bold">T</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">where</span><span style="color:#bbb"> </span>T: <span style="color:#458;font-weight:bold">Trait</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">struct</span> <span style="color:#458;font-weight:bold">Point</span><span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>atr: <span style="color:#458;font-weight:bold">T</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">impl</span><span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>Point<span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">fn</span> <span style="color:#900;font-weight:bold">generic_method</span>(<span style="color:#000;font-weight:bold">&amp;</span><span style="color:#999">self</span>,<span style="color:#bbb"> </span>val: <span style="color:#458;font-weight:bold">T</span>)<span style="color:#bbb"> </span>-&gt; <span style="color:#000;font-weight:bold">&amp;</span><span style="color:#458;font-weight:bold">T</span><span style="color:#bbb"> </span>{<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// implemented just for T which has the Trait
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">impl</span><span style="color:#000;font-weight:bold">&lt;</span>T: <span style="color:#458;font-weight:bold">Trait</span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>Point<span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">fn</span> <span style="color:#900;font-weight:bold">conditional_impl</span>(<span style="color:#000;font-weight:bold">&amp;</span><span style="color:#999">self</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">..</span>.<span style="color:#bbb"> </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><p>Traits</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">pub</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">trait</span><span style="color:#bbb"> </span>Summary<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">fn</span> <span style="color:#900;font-weight:bold">summarize</span>(<span style="color:#000;font-weight:bold">&amp;</span><span style="color:#999">self</span>)<span style="color:#bbb"> </span>-&gt; <span style="color:#0086b3">String</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div>
        </div>
    </div>
</div>

<div class="footer">
    <ul class="pad-content">

        <li>
            © Václav Blažej
            
                2021
            
        </li>
        

        

        
    </ul>
    <ul title="Last update of the website" class="pull-right pad">10. August 2024</ul>
</div>

<script type="text/javascript">
    $("#toggle-btn").click(function(){
        $("#toggle-content").toggle();
        if($(this).html() === "☰") {
            $(this).html("X")
        } else {
            $(this).html("☰")
        }
    });
    $(window).resize(function(){
        if(window.innerWidth > 768) {
            $(".desktop").removeAttr("style");
        }
    });
</script>
</body>
</html>

