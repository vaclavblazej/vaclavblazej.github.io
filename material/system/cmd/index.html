<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>
        
            Nástroj pro správu skriptů - Homepage of Vašek
        
    </title>
    <meta name="description" content="Homepage of Vašek">
    <meta name="author" content="">

    
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <link href="https://vaclavblazej.github.io//font/fonts.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://vaclavblazej.github.io/css/fonts.css">

    
    <script src="https://vaclavblazej.github.io/js/custom.js"></script>
    <link rel="stylesheet" href="https://vaclavblazej.github.io/css/custom.css">

    <link rel="shortcut icon" href="https://vaclavblazej.github.io//favicon.ico" />

    

    
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [ ['$','$'] ],
                displayMath: [ ["\\[","\\]"] ],
                processEscapes: true,
                autoload: {
                    color: [],
                    colorv2: ['color']
                },
                packages: {'[+]': ['noerrors']}
            },
            options: {
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process',
                renderActions: {
                    addMenu: [0, '', '']
                }
            },
            loader: {
                load: ['[tex]/noerrors']
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script"></script>

    <script src="https://vaclavblazej.github.io/js/jquery.min.js" type="text/javascript"></script>

</head>
<body>

<div class="header noprint">
    
    <div class="desktop nav-menu">
        <a href="https://vaclavblazej.github.io/" class="site-title pad">Homepage of Vašek</a>
        <ul>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/">Material</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/post/">Blog</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/teaching/">Teaching</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/pub/">Research</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/about/">About</a>
            </li>
            
        </ul>
    </div>
    <div class="mobile nav-menu">
        <a href="https://vaclavblazej.github.io/" class="site-title pad">Homepage of Vašek</a>
        <a href="#" id="toggle-btn">&#9776;</a>
    </div>
    <div>
        <ul id="toggle-content" style="display:none;">
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/">Material</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/post/">Blog</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/teaching/">Teaching</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/pub/">Research</a>
            </li>
            
            <li class="pad-vertically">
                <a class="pad" href="https://vaclavblazej.github.io/about/">About</a>
            </li>
            
        </ul>
    </div>
</div>



<div class="content">
    
    <div class="post">
        <div class="post-title">
            <p class="footnote">
                


    <time datetime="2017-07-01T00:00:00Z" class="post-list timeago">01.07.2017</time>






    |



    tags:[ <a href="https://vaclavblazej.github.io/tags/program">program</a> ]






            </p>
            <h1>Nástroj pro správu skriptů</h1>

            

        </div>
        <div class="post-content">
            <p><em>Updated 2023-08-04</em></p>
<p>Idea programu <strong>cmd</strong> je umožnit správu a spouštění vlastních příkazů a scriptů.</p>
<p>Program je v rozpracovaném stavu, ovšem měl by být použitelný.</p>
<h2 id="na-co-správu-příkazů">Na co správu příkazů?</h2>
<p>Po rozhovoru s kolegy jsem zjistil, že všichni zažíváme podobnou nepříjemnost: máme příkazy, které používáme často, ale nepamatujeme si je.
Kolikrát má příkaz divné jméno, nebo divně pojmenovaný přepínač, který je nezapamatovatelný.
Řešili jsme to různě:</p>
<ul>
<li>já měl půlku věcí v aliasech, a půlku ve funkcích</li>
<li>kolega hledal často používané příkazy pomocí bash-historie,</li>
<li>třetí na to samé měl texťák</li>
</ul>
<p>Pro vyřešení vznikl příkaz <strong>cmd</strong> (shell-command-manager / shcmdmgr) napsaný v Python3 zamýšlený pro linux, který dovede příkazy uložit, vyhledat, a spustit.</p>
<p>Navíc lze použít i pro ukládání projektových příkazů, takže například pro správu této stránky mám v kořenovém adresáři stránky složku <code>.cmd</code> kde je uložen script <code>deploy.sh</code> a vhodný <code>commands.json</code>.
Napsáním <code>cmd deploy</code> se stránka uloží a pushne v gitu, zkompiluje, a nahraje na server.
Ovšem <code>cmd deploy</code> funguje pouze, když jsem přeplý do podadresáře projektu, a tak lze v různých projektech nahrávat na server stejným příkazem, ať je způsob libovolný.</p>
<h2 id="instalace">Instalace</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>pip3 install shcmdmgr
</span></span></code></pre></div><ul>
<li><a href="https://pypi.org/project/shcmdmgr/"target="_blank">vydaný balík na Pypi (instalovaný přes pip)<span style="white-space: nowrap;">&thinsp;↗</span></a></li>
<li><a href="https://github.com/vaclavblazej/shell-command-manager"target="_blank">zdrojový kód<span style="white-space: nowrap;">&thinsp;↗</span></a></li>
</ul>
<h2 id="základní-použití">Základní použití</h2>
<p>Příkaz lze uložit pomocí <code>cmd -s</code> (nebo <code>cmd --save</code>). Například pro uložení <code>lsb_release -a</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ lsb_release -a
</span></span><span style="display:flex;"><span>Distributor ID:	Ubuntu
</span></span><span style="display:flex;"><span>Description:	Ubuntu 20.04 LTS
</span></span><span style="display:flex;"><span>Release:	20.04
</span></span><span style="display:flex;"><span>Codename:	focal
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cmd --save
</span></span><span style="display:flex;"><span>The <span style="color:#0086b3">command</span> to be saved: lsb_release -a   % tento text byl předvyplněný
</span></span><span style="display:flex;"><span>Alias: sysversion
</span></span><span style="display:flex;"><span>Short description: Zobrazí verzi systému
</span></span></code></pre></div><p>Po uložení lze příkaz vyvolat aliasem</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ cmd sysversion
</span></span><span style="display:flex;"><span>Distributor ID:	Ubuntu
</span></span><span style="display:flex;"><span>Description:	Ubuntu 20.04 LTS
</span></span><span style="display:flex;"><span>Release:	20.04
</span></span><span style="display:flex;"><span>Codename:	focal
</span></span></code></pre></div><p>nebo ho vyhledat pomocí <code>cmd -f</code> (nebo <code>cmd --find</code>).</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ cmd --find
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">========================================</span>
</span></span><span style="display:flex;"><span>query $ system                            % zobrazí se seznam výsledků hledání <span style="color:#000;font-weight:bold">(</span>podle regulárního výrazu<span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>--- <span style="color:#099">1</span> ------------------------------
</span></span><span style="display:flex;"><span>cmd: <span style="color:#000;font-weight:bold">do</span>-release-upgrade
</span></span><span style="display:flex;"><span>des: Upgrades the system to the newest released version
</span></span><span style="display:flex;"><span>--- <span style="color:#099">2</span> ------------------------------
</span></span><span style="display:flex;"><span>cmd: lsb_release -a
</span></span><span style="display:flex;"><span>des: Shows the system <span style="color:#008080">version</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">========================================</span>
</span></span><span style="display:flex;"><span>query $ <span style="color:#099">2</span>                                 % příkaz se spustí zadáním jeho čísla
</span></span><span style="display:flex;"><span>run command: lsb_release -a
</span></span><span style="display:flex;"><span>Distributor ID:	Ubuntu
</span></span><span style="display:flex;"><span>Description:	Ubuntu 20.04 LTS
</span></span><span style="display:flex;"><span>Release:	20.04
</span></span><span style="display:flex;"><span>Codename:	focal
</span></span></code></pre></div><p>Pro úpravu záznamů o příkazech lze spustit <code>cmd -e</code> (nebo <code>cmd --edit</code>), což spustí <code>$EDITOR ./&lt;script_location&gt;/commands.json</code>, nebo tento soubor můžete otevřít a upravit ručně.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ cmd --edit
</span></span><span style="display:flex;"><span>% Program v proměnné <span style="color:#d14">&#34;</span><span style="color:#008080">$EDITOR</span><span style="color:#d14">&#34;</span> otevře soubor, který vypadá podobně jako následující ukázka.
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#d14">&#34;command&#34;</span>: <span style="color:#d14">&#34;lsb_release -a&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#d14">&#34;description&#34;</span>: <span style="color:#d14">&#34;Zobrazí verzi systému&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#d14">&#34;alias&#34;</span>: <span style="color:#d14">&#34;sysversion&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#d14">&#34;creation_time&#34;</span>: <span style="color:#d14">&#34;2020-04-11 00:24:27&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#d14">&#34;command&#34;</span>: <span style="color:#d14">&#34;do-release-upgrade&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#d14">&#34;description&#34;</span>: <span style="color:#d14">&#34;Upgraduje systém na nejnovější vydanou verzi&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#d14">&#34;alias&#34;</span>: <span style="color:#d14">&#34;sysupgrade&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#d14">&#34;creation_time&#34;</span>: <span style="color:#d14">&#34;2020-04-11 00:25:08&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">]</span>
</span></span></code></pre></div><h3 id="doplňování">Doplňování</h3>
<p>Doplňování je připraveno pro <code>bash</code> a <code>zsh</code> shelly, a musí se zapnout ručně.
Zapnutí sestává z přidání řádky do RC souboru.</p>
<p>Správný kód k přidání lze získat spuštěním <code>--completion &lt;shell&gt;</code>.
Takže můžeme použít jeden z následujících příkazů, podle našeho shellu.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>cmd --completion bash &gt;&gt; ~/.bashrc
</span></span><span style="display:flex;"><span>cmd --completion zsh &gt;&gt; ~/.zshrc
</span></span></code></pre></div><hr>
<h2 id="historie">Historie</h2>
<p>Původně, kolem r. 2017, se program jmenoval <em>gen</em>.
Idea byla jednoduchá, ovšem nabalilo se na ní několik funkcionalit kolem generování mustru projektů, podobné modernějším scaffolding cli programům pro různé frameworky.
Nejasný cíl a špatně udržitelný kód vedl k opuštění, ovšem program jsem denně používal pro spouštění projektově-závislých scriptů.
Časem vykristalizovalo, že by byl dobrý ten samý program, s lepší podporou doplňování a helpem, zaměřený pouze pro spouštění vlastních příkazů.
Začátkem r. 2020 jsem program celý přepsal z nuly, připravil vydání na pypi server, aby se mohl program instalovat přes <code>pip</code>.
Další dění sem napíšu časem &hellip;</p>

        </div>
    </div>
</div>

<div class="footer">
    <ul class="pad-content">

        <li>
            © Václav Blažej
            
                2017
            
        </li>
        

        

        
    </ul>
    <ul title="Last update of the website" class="pull-right pad">29. December 2024</ul>
</div>

<script type="text/javascript">
    $("#toggle-btn").click(function(){
        $("#toggle-content").toggle();
        if($(this).html() === "☰") {
            $(this).html("X")
        } else {
            $(this).html("☰")
        }
    });
    $(window).resize(function(){
        if(window.innerWidth > 768) {
            $(".desktop").removeAttr("style");
        }
    });
</script>
</body>
</html>

